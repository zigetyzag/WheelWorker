import{_ as ze,$ as Te,a0 as de,r as t,a1 as ue,a2 as Be,a3 as i,a4 as x,a5 as ve,j as e,a6 as Ie,f as Le,a7 as Ve,u as Ue,o as Ae,a as se,d as Oe,g as He,h as Ke,i as qe,a8 as We,B as he,H as D,T as Je,k as Ye,l as ne,a9 as Ge,w as Ze,p as $e,aa as Qe,q as Xe,s as ae,t as te,v as ie,V as G,ab as re,ac as es,D as ss,U as we,ad as m,ae as j,P as C,y as I,z as ns,A as k,x as F,af as Ce,ag as as,ah as ts,ai as is,aj as rs,ak as os}from"./index-C0WLzDhq.js";var cs=()=>typeof document<"u",ke=!1,Z=null,M=!1,fe=!1,xe=new Set;function me(s,r){xe.forEach(a=>a(s,r))}var ls=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function ds(s){return!(s.metaKey||!ls&&s.altKey||s.ctrlKey||s.key==="Control"||s.key==="Shift"||s.key==="Meta")}function Se(s){M=!0,ds(s)&&(Z="keyboard",me("keyboard",s))}function V(s){if(Z="pointer",s.type==="mousedown"||s.type==="pointerdown"){M=!0;const r=s.composedPath?s.composedPath()[0]:s.target;let a=!1;try{a=r.matches(":focus-visible")}catch{}if(a)return;me("pointer",s)}}function us(s){return s.mozInputSource===0&&s.isTrusted?!0:s.detail===0&&!s.pointerType}function hs(s){us(s)&&(M=!0,Z="virtual")}function fs(s){s.target===window||s.target===document||s.target instanceof Element&&s.target.hasAttribute("tabindex")||(!M&&!fe&&(Z="virtual",me("virtual",s)),M=!1,fe=!1)}function xs(){M=!1,fe=!0}function _e(){return Z!=="pointer"}function ms(){if(!cs()||ke)return;const{focus:s}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...a){M=!0,s.apply(this,a)},document.addEventListener("keydown",Se,!0),document.addEventListener("keyup",Se,!0),document.addEventListener("click",hs,!0),window.addEventListener("focus",fs,!0),window.addEventListener("blur",xs,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",V,!0),document.addEventListener("pointermove",V,!0),document.addEventListener("pointerup",V,!0)):(document.addEventListener("mousedown",V,!0),document.addEventListener("mousemove",V,!0),document.addEventListener("mouseup",V,!0)),ke=!0}function js(s){ms(),s(_e());const r=()=>s(_e());return xe.add(r),()=>{xe.delete(r)}}const gs={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function bs(s={}){const r=ze(s),{isDisabled:a,isReadOnly:o,isRequired:h,isInvalid:c,id:S,onBlur:E,onFocus:g,"aria-describedby":N}=r,{defaultChecked:b,isChecked:z,isFocusable:P,onChange:A,isIndeterminate:l,name:$,value:O,tabIndex:H=void 0,"aria-label":_,"aria-labelledby":K,"aria-invalid":L,...oe}=s,q=Te(oe,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),T=de(A),d=de(E),p=de(g),[y,W]=t.useState(!1),[R,Q]=t.useState(!1),[J,je]=t.useState(!1),[Y,B]=t.useState(!1);t.useEffect(()=>js(W),[]);const v=t.useRef(null),[ce,Ee]=t.useState(!0),[Pe,X]=t.useState(!!b),le=z!==void 0,u=le?z:Pe,ge=t.useCallback(n=>{if(o||a){n.preventDefault();return}le||X(u?n.currentTarget.checked:l?!0:n.currentTarget.checked),T==null||T(n)},[o,a,u,le,l,T]);ue(()=>{v.current&&(v.current.indeterminate=!!l)},[l]),Be(()=>{a&&Q(!1)},[a,Q]),ue(()=>{const n=v.current;if(!(n!=null&&n.form))return;const f=()=>{X(!!b)};return n.form.addEventListener("reset",f),()=>{var w;return(w=n.form)==null?void 0:w.removeEventListener("reset",f)}},[]);const be=a&&!P,pe=t.useCallback(n=>{n.key===" "&&B(!0)},[B]),ye=t.useCallback(n=>{n.key===" "&&B(!1)},[B]);ue(()=>{if(!v.current)return;v.current.checked!==u&&X(v.current.checked)},[v.current]);const Re=t.useCallback((n={},f=null)=>{const w=ee=>{R&&ee.preventDefault(),B(!0)};return{...n,ref:f,"data-active":i(Y),"data-hover":i(J),"data-checked":i(u),"data-focus":i(R),"data-focus-visible":i(R&&y),"data-indeterminate":i(l),"data-disabled":i(a),"data-invalid":i(c),"data-readonly":i(o),"aria-hidden":!0,onMouseDown:x(n.onMouseDown,w),onMouseUp:x(n.onMouseUp,()=>B(!1)),onMouseEnter:x(n.onMouseEnter,()=>je(!0)),onMouseLeave:x(n.onMouseLeave,()=>je(!1))}},[Y,u,a,R,y,J,l,c,o]),De=t.useCallback((n={},f=null)=>({...n,ref:f,"data-active":i(Y),"data-hover":i(J),"data-checked":i(u),"data-focus":i(R),"data-focus-visible":i(R&&y),"data-indeterminate":i(l),"data-disabled":i(a),"data-invalid":i(c),"data-readonly":i(o)}),[Y,u,a,R,y,J,l,c,o]),Fe=t.useCallback((n={},f=null)=>({...q,htmlFor:ce?S:void 0,...n,ref:ve(f,w=>{w&&Ee(w.tagName==="LABEL")}),onClick:x(n.onClick,()=>{var w;ce||((w=v.current)==null||w.click(),requestAnimationFrame(()=>{var ee;(ee=v.current)==null||ee.focus({preventScroll:!0})}))}),"data-disabled":i(a),"data-checked":i(u),"data-invalid":i(c)}),[q,a,u,c,ce,S]),Me=t.useCallback((n={},f=null)=>({...n,ref:ve(v,f),type:"checkbox",name:$,value:O,id:S,tabIndex:H,onChange:x(n.onChange,ge),onBlur:x(n.onBlur,d,()=>Q(!1)),onFocus:x(n.onFocus,p,()=>Q(!0)),onKeyDown:x(n.onKeyDown,pe),onKeyUp:x(n.onKeyUp,ye),required:h,checked:u,disabled:be,readOnly:o,"aria-label":_,"aria-labelledby":K,"aria-invalid":L?!!L:c,"aria-describedby":N,"aria-disabled":a,"aria-checked":l?"mixed":u,style:gs}),[$,O,S,H,ge,d,p,pe,ye,h,u,be,o,_,K,L,c,N,a,l]),Ne=t.useCallback((n={},f=null)=>({...n,ref:f,onMouseDown:x(n.onMouseDown,ps),"data-disabled":i(a),"data-checked":i(u),"data-invalid":i(c)}),[u,a,c]);return{state:{isInvalid:c,isFocused:R,isChecked:u,isActive:Y,isHovered:J,isIndeterminate:l,isDisabled:a,isReadOnly:o,isRequired:h},getRootProps:Fe,getCheckboxProps:Re,getIndicatorProps:De,getInputProps:Me,getLabelProps:Ne,htmlProps:q}}function ps(s){s.preventDefault(),s.stopPropagation()}function ys(s){const{leastDestructiveRef:r,...a}=s;return e.jsx(Ie,{...a,initialFocusRef:r})}const vs=Le((s,r)=>e.jsx(Ve,{ref:r,role:"alertdialog",...s})),U=Le(function(r,a){const o=Ue("Switch",r),{spacing:h="0.5rem",children:c,...S}=Ae(r),{getIndicatorProps:E,getInputProps:g,getCheckboxProps:N,getRootProps:b,getLabelProps:z}=bs(S),P=t.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...o.container}),[o.container]),A=t.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...o.track}),[o.track]),l=t.useMemo(()=>({userSelect:"none",marginStart:h,...o.label}),[h,o.label]);return e.jsxs(se.label,{...b(),className:Oe("chakra-switch",r.className),__css:P,children:[e.jsx("input",{className:"chakra-switch__input",...g({},a)}),e.jsx(se.span,{...N(),className:"chakra-switch__track",__css:A,children:e.jsx(se.span,{__css:o.thumb,className:"chakra-switch__thumb",...E()})}),c&&e.jsx(se.span,{className:"chakra-switch__label",...z(),__css:l,children:c})]})});U.displayName="Switch";function ks(){const{profile:s,updateProfile:r,signOut:a,verifyDriver:o}=He(),[h,c]=t.useState({full_name:"",job_title:"",experience:"",location:"",phone:"",license_number:""}),[S,E]=t.useState(!1),[g,N]=t.useState({license_number:"",full_name:""}),[b,z]=t.useState({email:!0,push:!0,chatMessages:!0,forumReplies:!0,newsUpdates:!1}),P=Ke(),A=qe(),{isOpen:l,onOpen:$,onClose:O}=We(),H=t.useRef(null);t.useEffect(()=>{s&&c({full_name:s.full_name||"",job_title:s.job_title||"",experience:s.experience||"",location:s.location||"",phone:s.phone||"",license_number:s.license_number||""})},[s]);const _=d=>{const{name:p,value:y}=d.target;c(W=>({...W,[p]:y}))},K=d=>{const{name:p,value:y}=d.target;N(W=>({...W,[p]:y}))},L=d=>{z(p=>({...p,[d]:!p[d]}))},oe=async()=>{E(!0);const{error:d}=await r(h);P(d?{title:"Error updating profile",description:d.message,status:"error",duration:5e3}:{title:"Profile updated",status:"success",duration:3e3}),E(!1)},q=async()=>{E(!0);const{success:d,error:p,message:y}=await o(g.license_number,g.full_name);P({title:d?"Verification successful":"Verification failed",description:y,status:d?"success":"error",duration:5e3}),E(!1)},T=async()=>{await a(),A("/"),P({title:"Logged out successfully",status:"success",duration:3e3})};return e.jsxs(he,{children:[e.jsx(D,{mb:6,children:"Account Settings"}),e.jsxs(Je,{colorScheme:"teal",variant:"enclosed",children:[e.jsxs(Ye,{children:[e.jsxs(ne,{children:[e.jsx(Ge,{size:18,style:{marginRight:"8px"}})," Profile"]}),e.jsxs(ne,{children:[e.jsx(Ze,{size:18,style:{marginRight:"8px"}})," Verification"]}),e.jsxs(ne,{children:[e.jsx($e,{size:18,style:{marginRight:"8px"}})," Notifications"]}),e.jsxs(ne,{children:[e.jsx(Qe,{size:18,style:{marginRight:"8px"}})," Security"]})]}),e.jsxs(Xe,{children:[e.jsx(ae,{children:e.jsx(te,{variant:"outline",bg:"white",mb:6,children:e.jsx(ie,{children:e.jsxs(G,{spacing:6,align:"stretch",children:[e.jsx(re,{justifyContent:"center",p:6,children:e.jsx(es,{size:"2xl",name:(s==null?void 0:s.full_name)||"User",src:(s==null?void 0:s.avatar_url)||void 0})}),e.jsxs(re,{justify:"space-between",align:"center",children:[e.jsx(D,{size:"md",children:"Personal Information"}),e.jsx(ss,{colorScheme:s!=null&&s.is_verified?"green":"gray",py:1,px:2,borderRadius:"full",children:e.jsxs(re,{align:"center",children:[(s==null?void 0:s.is_verified)&&e.jsx(we,{size:14,style:{marginRight:"4px"}}),s!=null&&s.is_verified?"Verified Driver":"Unverified"]})})]}),e.jsxs(m,{children:[e.jsx(j,{children:"Full Name"}),e.jsx(C,{name:"full_name",value:h.full_name,onChange:_})]}),e.jsxs(I,{spacing:4,children:[e.jsxs(m,{flex:1,children:[e.jsx(j,{children:"Job Title"}),e.jsx(C,{name:"job_title",value:h.job_title,onChange:_})]}),e.jsxs(m,{flex:1,children:[e.jsx(j,{children:"Experience"}),e.jsxs(ns,{name:"experience",value:h.experience,onChange:_,children:[e.jsx("option",{value:"",children:"Select experience"}),e.jsx("option",{value:"0-1 years",children:"0-1 years"}),e.jsx("option",{value:"1-3 years",children:"1-3 years"}),e.jsx("option",{value:"3-5 years",children:"3-5 years"}),e.jsx("option",{value:"5+ years",children:"5+ years"})]})]})]}),e.jsxs(m,{children:[e.jsx(j,{children:"Location"}),e.jsx(C,{name:"location",value:h.location,onChange:_})]}),e.jsxs(m,{children:[e.jsx(j,{children:"Phone Number"}),e.jsx(C,{name:"phone",value:h.phone,onChange:_})]}),e.jsxs(m,{children:[e.jsx(j,{children:"TLC License Number"}),e.jsx(C,{name:"license_number",value:h.license_number,onChange:_,isReadOnly:s==null?void 0:s.is_verified,bg:s!=null&&s.is_verified?"gray.50":void 0}),(s==null?void 0:s.is_verified)&&e.jsx(k,{fontSize:"sm",color:"gray.500",mt:1,children:"License number cannot be changed after verification"})]}),e.jsx(F,{colorScheme:"teal",onClick:oe,isLoading:S,alignSelf:"flex-end",children:"Save Changes"})]})})})}),e.jsx(ae,{children:e.jsx(te,{variant:"outline",bg:"white",mb:6,children:e.jsx(ie,{children:e.jsxs(G,{spacing:6,align:"stretch",children:[e.jsx(D,{size:"md",children:"Driver Verification"}),s!=null&&s.is_verified?e.jsxs(he,{p:6,bg:"green.50",borderRadius:"md",borderLeft:"4px solid",borderColor:"green.500",children:[e.jsxs(re,{align:"center",mb:2,children:[e.jsx(we,{size:24,color:"green",style:{marginRight:"12px"}}),e.jsx(D,{size:"md",color:"green.600",children:"Verified Driver"})]}),e.jsx(k,{children:"Your driver status has been verified. You now have access to all verified driver features."})]}):e.jsxs(G,{spacing:4,align:"stretch",children:[e.jsx(k,{children:"Complete verification to access premium features and join exclusive driver communities."}),e.jsxs(m,{isRequired:!0,children:[e.jsx(j,{children:"TLC License Number"}),e.jsx(C,{name:"license_number",value:g.license_number,onChange:K,placeholder:"Example: TLC-12345678"}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"For demo use: TLC-12345678 or TLC-87654321"})]}),e.jsxs(m,{isRequired:!0,children:[e.jsx(j,{children:"Full Name (as on license)"}),e.jsx(C,{name:"full_name",value:g.full_name,onChange:K,placeholder:"Exactly as it appears on your license"}),e.jsx(k,{fontSize:"xs",color:"gray.500",mt:1,children:"For demo use: John Smith or Sara Johnson"})]}),e.jsx(F,{colorScheme:"teal",onClick:q,isLoading:S,isDisabled:!g.license_number||!g.full_name,children:"Verify Now"})]})]})})})}),e.jsx(ae,{children:e.jsx(te,{variant:"outline",bg:"white",mb:6,children:e.jsx(ie,{children:e.jsxs(G,{spacing:6,align:"stretch",children:[e.jsx(D,{size:"md",children:"Notification Preferences"}),e.jsxs(I,{justify:"space-between",children:[e.jsx(k,{children:"Email Notifications"}),e.jsx(U,{colorScheme:"teal",isChecked:b.email,onChange:()=>L("email")})]}),e.jsxs(I,{justify:"space-between",children:[e.jsx(k,{children:"Push Notifications"}),e.jsx(U,{colorScheme:"teal",isChecked:b.push,onChange:()=>L("push")})]}),e.jsx(Ce,{}),e.jsx(D,{size:"sm",children:"What to notify me about:"}),e.jsxs(I,{justify:"space-between",children:[e.jsx(k,{children:"Chat Messages"}),e.jsx(U,{colorScheme:"teal",isChecked:b.chatMessages,onChange:()=>L("chatMessages")})]}),e.jsxs(I,{justify:"space-between",children:[e.jsx(k,{children:"Forum Replies"}),e.jsx(U,{colorScheme:"teal",isChecked:b.forumReplies,onChange:()=>L("forumReplies")})]}),e.jsxs(I,{justify:"space-between",children:[e.jsx(k,{children:"News & Updates"}),e.jsx(U,{colorScheme:"teal",isChecked:b.newsUpdates,onChange:()=>L("newsUpdates")})]}),e.jsx(F,{colorScheme:"teal",alignSelf:"flex-end",children:"Save Preferences"})]})})})}),e.jsx(ae,{children:e.jsx(te,{variant:"outline",bg:"white",mb:6,children:e.jsx(ie,{children:e.jsxs(G,{spacing:6,align:"stretch",children:[e.jsx(D,{size:"md",children:"Security Settings"}),e.jsxs(m,{children:[e.jsx(j,{children:"Current Password"}),e.jsx(C,{type:"password",placeholder:"Enter current password"})]}),e.jsxs(m,{children:[e.jsx(j,{children:"New Password"}),e.jsx(C,{type:"password",placeholder:"Enter new password"})]}),e.jsxs(m,{children:[e.jsx(j,{children:"Confirm New Password"}),e.jsx(C,{type:"password",placeholder:"Confirm new password"})]}),e.jsx(F,{colorScheme:"teal",alignSelf:"flex-end",children:"Change Password"}),e.jsx(Ce,{my:4}),e.jsxs(he,{children:[e.jsx(D,{size:"md",mb:4,color:"red.500",children:"Danger Zone"}),e.jsx(F,{leftIcon:e.jsx(as,{size:18}),colorScheme:"red",variant:"outline",onClick:$,children:"Log Out"})]})]})})})})]})]}),e.jsx(ys,{isOpen:l,leastDestructiveRef:H,onClose:O,children:e.jsx(ts,{children:e.jsxs(vs,{children:[e.jsx(is,{fontSize:"lg",fontWeight:"bold",children:"Log Out"}),e.jsx(rs,{children:"Are you sure you want to log out? You will need to log back in to access your account."}),e.jsxs(os,{children:[e.jsx(F,{ref:H,onClick:O,children:"Cancel"}),e.jsx(F,{colorScheme:"red",onClick:T,ml:3,children:"Log Out"})]})]})})})]})}export{ks as default};
